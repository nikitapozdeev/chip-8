(()=>{"use strict";var t={426:(t,e,s)=>{s.d(e,{Z:()=>p});var i=s(81),n=s.n(i),r=s(645),o=s.n(r),a=s(667),l=s.n(a),h=new URL(s(236),s.b),c=o()(n()),d=l()(h);c.push([t.id,'/* Box sizing rules */\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n/* Remove default margin */\nbody,\nh1,\nh2,\nh3,\nh4,\np,\nfigure,\nblockquote,\ndl,\ndd {\n  margin: 0;\n}\n\n/* Remove list styles on ul, ol elements with a list role, which suggests default styling will be removed */\nul[role=\'list\'],\nol[role=\'list\'] {\n  list-style: none;\n}\n\n/* Set core root defaults */\nhtml:focus-within {\n  scroll-behavior: smooth;\n}\n\n/* Set core body defaults */\nbody {\n  min-height: 100vh;\n  text-rendering: optimizeSpeed;\n  line-height: 1.5;\n}\n\n/* A elements that don\'t have a class get default styles */\na:not([class]) {\n  text-decoration-skip-ink: auto;\n}\n\n/* Make images easier to work with */\nimg,\npicture {\n  max-width: 100%;\n  display: block;\n}\n\n/* Inherit fonts for inputs and buttons */\ninput,\nbutton,\ntextarea,\nselect {\n  font: inherit;\n}\n\n/* Remove all animations, transitions and smooth scroll for people that prefer not to see them */\n@media (prefers-reduced-motion: reduce) {\n  html:focus-within {\n   scroll-behavior: auto;\n  }\n  \n  *,\n  *::before,\n  *::after {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n    scroll-behavior: auto !important;\n  }\n}\n\nhtml {\n  height: 100%;\n}\n\nbody {\n  display: flex;\n  min-height: 100%;\n  flex-direction: column;\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  color: rgb(208, 213, 223);\n  background-color: rgb(23, 23, 23);\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n}\n\n.wrapper {\n  margin: auto;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n}\n\n.content {\n  display: flex;\n  gap: 1rem;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n\n.header {\n  font-family: \'VT323\', monospace;\n  font-size: 4rem;\n  text-align: center;\n}\n\n.emulator {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n}\n\n.terminal {\n  width: 740px;\n  height: 620px;\n  background-image: url('+d+");\n}\n\n.terminal canvas {\n  margin: 50px;\n}\n\n.keyboard-container {\n  display: flex;\n  align-self: flex-end;\n}\n\n.keyboard {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center;\n  max-width: calc(4 * 2rem + 20px);\n\n  background: #868187;\n  border-left: 10px solid #646365;\n  border-bottom: 10px solid #646365;\n  border-top: 10px solid #b8b5b9;\n  border-right: 10px solid #b8b5b9;\n}\n\n.keyboard__key {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem;\n  width: 1rem;\n  height: 1rem;\n  cursor: pointer;\n  user-select: none;\n}\n\n.keyboard__key:hover {\n  background-color: #64636580;\n}\n\n.roms-container {\n  display: flex;\n  align-self: flex-end;\n}\n\n.roms {\n  min-width: calc(4 * 2rem);\n  background: #868187;\n  height: 620px;\n  max-width: 300px;\n  overflow-y: scroll;\n}\n\n.rom {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  border-left: 5px solid #646365;\n  border-bottom: 5px solid #646365;\n  border-top: 5px solid #b8b5b9;\n  border-right: 5px solid #b8b5b9;\n  cursor: pointer;\n}\n\n.rom:hover {\n  background-color: #64636580;\n}\n\n.nav-link {\n  color: #999;\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.nav-link:hover {\n  color: #ddd;\n}",""]);const p=c},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var h=0;h<t.length;h++){var c=[].concat(t[h]);i&&o[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),e.push(c))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},o=[],a=0;a<t.length;a++){var l=t[a],h=i.base?l[0]+i.base:l[0],c=r[h]||0,d="".concat(h," ").concat(c);r[h]=c+1;var p=s(d),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var f=n(u,i);i.byIndex=a,e.splice(a,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=s(r[o]);e[a].references--}for(var l=i(t,n),h=0;h<r.length;h++){var c=s(r[h]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=l}}},569:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},236:(t,e,s)=>{t.exports=s.p+"a7a22fa4f866e4d0bea9.png"}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,s),r.exports}s.m=t,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),s.b=document.baseURI||self.location.href,s.nc=void 0,(()=>{const t=Object.freeze([240,144,144,144,240,32,96,32,32,112,240,16,240,128,240,240,16,240,16,240,144,144,240,16,16,240,128,240,16,240,240,128,240,144,240,240,16,32,64,64,240,144,240,144,240,240,144,240,16,240,240,144,240,144,144,224,144,224,144,224,240,128,128,128,240,224,144,144,144,224,240,128,240,128,240,240,128,240,128,128]),e=document.getElementById("chip8"),i=e.getContext("2d"),n="#CADC9F";e.width=640,e.height=320,i.fillStyle=n,i.fillRect(0,0,e.width,e.height),i.scale(10,10);function r(t,e){const s=new KeyboardEvent(t,{keyCode:e});window.dispatchEvent(s)}const o=JSON.parse('["BMP Viewer - Hello (C8 example) [Hap, 2005]","Breakout (Brix hack) [David Winter, 1997]","Brick (Brix hack, 1990)","Brix [Andreas Gustafsson, 1990]","Chip8 emulator Logo [Garstyciuks]","Clock Program [Bill Fisher, 1981]","Delay Timer Test [Matthew Mikolay, 2010]","Division Test [Sergey Naydenov, 2010]","IBM Logo","Landing","Life [GV Samways, 1980]","Lunar Lander (Udo Pernisz, 1979)","Maze (alt) [David Winter, 199x]","Maze [David Winter, 199x]","Particle Demo [zeroZshadow, 2008]","Random Number Test [Matthew Mikolay, 2010]","Stars [Sergey Naydenov, 2010]","anEveningToDieFor","chip8-picture","chip8-test-rom-with-audio","chip8-test-rom","octojam1title","octojam2title","octopeg","pong","superneatboy","test_opcode"]');var a=s(379),l=s.n(a),h=s(795),c=s.n(h),d=s(569),p=s.n(d),u=s(565),f=s.n(u),g=s(216),m=s.n(g),y=s(589),x=s.n(y),b=s(426),v={};v.styleTagTransform=x(),v.setAttributes=f(),v.insert=p().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=m(),l()(b.Z,v),b.Z&&b.Z.locals&&b.Z.locals,function(){const e=o.map((t=>`<div class='rom' data-key='${t}'>${t}</div>`)).join(""),s=document.getElementById("roms");s.insertAdjacentHTML("beforeend",e),s.addEventListener("click",(e=>{e.target.classList.contains("rom")&&function(e){const s=new class{constructor(){this.ram=new Uint8Array(4096),this.video=this.createVideo(),this.registers=new Uint8Array(16),this.I=0,this.stack=new Uint16Array(16),this.ip=512,this.sp=-1,this.dt=0,this.st=0,this.speed=10,this.running=!1,this.loadFont(),this.speaker=new class{constructor(){this._context=new(window.AudioContext||window.webkitAudioContext),this._oscillator=this._context.createOscillator(),this._oscillator.connect(this._context.destination),this._isStarted=!1}play(){this._isStarted?this._context.resume():(this._oscillator.frequency.setTargetAtTime(440,this._context.currentTime,0),this._oscillator.start(0),this._isStarted=!0)}stop(){this._context.suspend()}},this.keyboard=new class{constructor(){this.keyMap={49:1,50:2,51:3,52:12,81:4,87:5,69:6,82:13,65:7,83:8,68:9,70:14,90:10,88:0,67:11,68:15},this.pressedKeys={},this.waitForKeyPressCallback=null,this.subscribeToEvents()}subscribeToEvents(){window.addEventListener("keydown",this.onKeyDownEvent.bind(this)),window.addEventListener("keyup",this.onKeyUpEvent.bind(this))}onKeyDownEvent({keyCode:t}){const e=this.keyMap[t];e&&(this.pressedKeys[e]=!0,this.waitForKeyPressCallback&&(this.waitForKeyPressCallback(e),this.waitForKeyPressCallback=null))}onKeyUpEvent({keyCode:t}){const e=this.keyMap[t];e&&this.pressedKeys[e]&&delete this.pressedKeys[e]}isKeyPressed(t){return!!this.pressedKeys[t]}waitForKeyPress(t){this.waitForKeyPressCallback=t}}}createVideo(){const t=[];for(let e=0;e<32;e++){const e=[];for(let t=0;t<64;t++)e[t]=0;t.push(e)}return t}loadFont(){for(let e=0;e<t.length;e++)this.ram[e]=t[e]}draw(){for(let t=0;t<32;t++)for(let e=0;e<64;e++)1===this.video[t][e]?i.fillStyle="#306230":i.fillStyle=n,i.fillRect(e,t,1,1)}start(){this.running=!0,console.log("power on");const t=1e3/60;let e;const s=i=>{e&&(i-e).toFixed(2)>=t.toFixed(2)&&this.tick(),e=i,window.requestAnimationFrame(s)};window.requestAnimationFrame(s)}tick(){for(let t=0;t<this.speed;++t)this.running&&this.processInstruction();this.running&&(this.updateTimers(),this.processAudio(),this.draw())}updateTimers(){this.dt>0&&this.dt--,this.st>0&&this.st--}processAudio(){this.st>0?this.speaker.play():this.speaker.stop()}processInstruction(){const t=this.getOpCode(),e=4095&t,s=15&t,i=t>>8&15,n=t>>4&15,r=255&t;if(224===t)this.cls();else if(238===t)this.ret();else if(4096==(61440&t))this.jp(e);else if(8192==(61440&t))this.call(e);else if(12288==(61440&t))this.seVx(i,r);else if(16384==(61440&t))this.sneVx(i,r);else if(20480==(61440&t))this.seVxVy(i,n);else if(24576==(61440&t))this.ldVx(i,r);else if(28672==(61440&t))this.addVx(i,r);else if(32768==(61455&t))this.ldVxVy(i,n);else if(32769==(61455&t))this.orVxVy(i,n);else if(32770==(61455&t))this.andVxVy(i,n);else if(32771==(61455&t))this.xorVxVy(i,n);else if(32772==(61455&t))this.addVxVy(i,n);else if(32773==(61455&t))this.subVxVy(i,n);else if(32774==(61455&t))this.shrVx(i);else if(32775==(61455&t))this.subnVxVy(i,n);else if(32782==(61455&t))this.shlVx(i);else if(36864==(61455&t))this.sneVxVy(i,n);else if(40960==(61440&t))this.ld(e);else if(45056==(61440&t))this.jpV0(e);else if(49152==(61440&t))this.rndVx(i,r);else if(53248==(61440&t))this.drwVxVy(i,n,s);else if(57502==(61695&t))this.skpVx(i);else if(57505==(61695&t))this.sknpVx(i);else if(61447==(61695&t))this.ldVxDt(i);else if(61450==(61695&t))this.ldVxK(i);else if(61461==(61695&t))this.ldDtVx(i);else if(61464==(61695&t))this.ldStVx(i);else if(61470==(61695&t))this.addIVx(i);else if(61481==(61695&t))this.ldFVx(i);else if(61491==(61695&t))this.ldBVx(i);else if(61525==(61695&t))this.ldIVx(i);else{if(61541!=(61695&t))throw new Error("unknown command "+t.toString(16).padStart(4,"0"));this.ldVxI(i)}}sys(t){this.ip=t}cls(){this.video=this.createVideo()}ret(){if(-1===this.sp)throw new Error("Stack underflow");this.ip=this.stack[this.sp],this.sp--}jp(t){this.ip=t}call(t){if(this.sp++,this.sp>this.stack.length)throw new Error("Stack overflow");this.stack[this.sp]=this.ip,this.ip=t}seVx(t,e){this.registers[t]===e&&(this.ip+=2)}sneVx(t,e){this.registers[t]!==e&&(this.ip+=2)}seVxVy(t,e){this.registers[t]===this.registers[e]&&(this.ip+=2)}ldVx(t,e){this.registers[t]=e}addVx(t,e){this.registers[t]+=e}ldVxVy(t,e){this.registers[t]=this.registers[e]}orVxVy(t,e){this.registers[t]|=this.registers[e]}andVxVy(t,e){this.registers[t]&=this.registers[e]}xorVxVy(t,e){this.registers[t]^=this.registers[e]}addVxVy(t,e){this.registers[t]+=this.registers[e],this.registers[t]>255?(this.registers[t]&=255,this.registers[15]=1):this.registers[15]=0}subVxVy(t,e){this.registers[t]>this.registers[e]?this.registers[15]=1:this.registers[15]=0,this.registers[t]-=this.registers[e]}shrVx(t){255==(255&this.registers[t])?this.registers[15]=1:this.registers[15]=0,this.registers[t]=this.registers[t]>>1}subnVxVy(t,e){this.registers[e]>this.registers[t]?this.registers[15]=1:this.registers[15]=0,this.registers[e]-=this.registers[t]}shlVx(t){65280==(65280&this.registers[t])?this.registers[15]=1:this.registers[15]=0,this.registers[t]=this.registers[t]<<1}sneVxVy(t,e){this.registers[t]!==this.registers[e]&&(this.ip+=2)}ld(t){this.I=t}jpV0(t){this.pc=t+this.registers[0]}rndVx(t,e){const s=Math.ceil(256*Math.random());this.registers[t]=s&e}drwVxVy(t,e,s){t=this.registers[t],e=this.registers[e];let i=!1;const n=this.ram.slice(this.I,this.I+s);for(let s=0;s<n.length;s++){const r=n[s].toString(2).padStart(8,"0").split("").map(Number);for(let n=0;n<r.length;n++){const o=e+s,a=t+n,l=this.video[o%32][a%64]^r[n];1===this.video[o%32][a%64]&&0===l&&(i=!0),this.video[o%32][a%64]=l,this.registers[15]=i?1:0}}}skpVx(t){const e=this.registers[t];this.keyboard.isKeyPressed(e)&&(this.ip+=2)}sknpVx(t){const e=this.registers[t];this.keyboard.isKeyPressed(e)||(this.ip+=2)}ldVxDt(t){this.registers[t]=this.dt}ldVxK(t){this.running=!1,this.keyboard.waitForKeyPress((e=>{this.registers[t]=e,this.running=!0}))}ldDtVx(t){this.dt=this.registers[t]}ldStVx(t){this.st=this.registers[t]}addIVx(t){this.I+=this.registers[t]}ldFVx(t){this.I=5*this.registers[t]}ldBVx(t){let e=this.registers[t];const s=Math.floor(e/100);e-=100*s;const i=Math.floor(e/10);e-=10*i;const n=Math.floor(e);this.ram[this.I]=s,this.ram[this.I+1]=i,this.ram[this.I+2]=n}ldIVx(t){for(let e=0;e<=t;e++)this.ram[this.I+e]=this.registers[e]}ldVxI(t){for(let e=0;e<=t;e++)this.registers[e]=this.ram[this.I+e]}getOpCode(){return this.ram[this.ip++]<<8|this.ram[this.ip++]}load(t){for(let e=0;e<t.byteLength;e++)this.ram[this.ip+e]=t[e]}};fetch(`./roms/${e}.ch8`).then((t=>t.arrayBuffer())).then((t=>new Uint8Array(t))).then((t=>{s.load(t),s.start()}))}(e.target.getAttribute("data-key"))}))}(),function(){const t=document.getElementById("keyboard"),e="keyboard__key",s="data-key";t.addEventListener("mousedown",(t=>{t.target.classList.contains(e)&&r("keydown",t.target.getAttribute(s).charCodeAt(0))})),t.addEventListener("mouseup",(t=>{t.target.classList.contains(e)&&r("keyup",t.target.getAttribute(s).charCodeAt(0))}))}()})()})();